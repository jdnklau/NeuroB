apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'maven'

project.version = '0.4.3'
project.group = 'de.hhu.stups'
project.archivesBaseName = "NeuroB"

project.sourceCompatibility = '1.8'
project.targetCompatibility = '1.8'


repositories {
	mavenCentral()
        maven {
		name "sonatype snapshots"
		url "https://oss.sonatype.org/content/repositories/snapshots"
	}
	maven {
		name "sonatype releases"
		url "https://oss.sonatype.org/content/repositories/releases"
	}
}

dependencies {

	compile 'commons-cli:commons-cli:1.2'
	compile (group: 'de.hhu.stups', name: 'de.prob2.kernel', version: '2.0.3-SNAPSHOT')

	compile (group: 'org.deeplearning4j', name: 'deeplearning4j-core', version: '0.5.0')
}

configurations {
    all*.exclude group: 'org.bytedeco', module: 'javacpp-presets'
}

task wrapper(type:Wrapper) {
	gradleVersion = '3.0'
}

sourceSets {
	main {
		java {
			srcDir 'src'
		}
	}
}

task TrainingSetGenerationJar(type: Jar) {
	manifest {
        attributes 'Implementation-Title': 'Training Set Generation',
        	'Implementation-Version': version,
        	'Main-Class': 'TrainingSetGeneration'
    }
    baseName = project.name
    appendix = 'TrainingSetGeneration'
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
	with jar
}

task DistributeLibraryIODefJar(type: Jar) {
	manifest {
        attributes 'Implementation-Title': 'Distribute the LibraryIO.def',
        	'Implementation-Version': version,
        	'Main-Class': 'DistributeLibraryIODef'
    }
    baseName = project.name
    appendix = 'DistributeLibraryIODef'
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
	with jar
}

task buildJars {
	dependsOn TrainingSetGenerationJar
	dependsOn DistributeLibraryIODefJar
}


